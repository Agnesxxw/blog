(window.webpackJsonp=window.webpackJsonp||[]).push([[258],{707:function(t,e,r){"use strict";r.r(e);var a=r(12),o=Object(a.a)({},(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[r("p",[t._v("CSRF ： Cross-Site Request Forgery  跨站请求伪造")]),t._v(" "),r("h2",{attrs:{id:"csrf流程"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#csrf流程"}},[t._v("#")]),t._v(" CSRF流程")]),t._v(" "),r("p",[t._v("一个典型的CSRF攻击有着如下的流程：")]),t._v(" "),r("ul",[r("li",[t._v("受害者登录a.com，并保留了登录凭证（Cookie）。")]),t._v(" "),r("li",[t._v("攻击者引诱受害者访问了b.com。")]),t._v(" "),r("li",[r("a",{attrs:{href:"http://b.com",target:"_blank",rel:"noopener noreferrer"}},[t._v("b.com"),r("OutboundLink")],1),t._v(" 向 "),r("a",{attrs:{href:"http://a.com",target:"_blank",rel:"noopener noreferrer"}},[t._v("a.com"),r("OutboundLink")],1),t._v(" 发送了一个请求：a.com/act=xx。浏览器会默认携带a.com的Cookie。")]),t._v(" "),r("li",[t._v("a.com接收到请求后，对请求进行验证，并确认是受害者的凭证，误以为是受害者自己发送的请求。")]),t._v(" "),r("li",[t._v("a.com以受害者的名义执行了act=xx。")]),t._v(" "),r("li",[t._v("攻击完成，攻击者在受害者不知情的情况下，冒充受害者，让a.com执行了自己定义的操作。")])]),t._v(" "),r("p",[t._v("下面这张图就展示了CSRF跨站请求伪造的过程：")]),t._v(" "),r("p",[r("img",{attrs:{src:"https://tva1.sinaimg.cn/large/007S8ZIlgy1gixko2nir0j30u10ddmzn.jpg",alt:""}})]),t._v(" "),r("h2",{attrs:{id:"csrf分析"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#csrf分析"}},[t._v("#")]),t._v(" CSRF分析")]),t._v(" "),r("p",[t._v("可以看到，csrf能成功的原因在于：借助浏览器cookie的机制，非法使用了用户的cookie。")]),t._v(" "),r("p",[t._v("但也可以看出来，攻击者无法读取和操作cookie，只是发起伪造请求，带上了cookie。")]),t._v(" "),r("h2",{attrs:{id:"csrf防范策略"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#csrf防范策略"}},[t._v("#")]),t._v(" CSRF防范策略")]),t._v(" "),r("p",[t._v("根据分析：")]),t._v(" "),r("ul",[r("li",[t._v("禁用跨域请求")]),t._v(" "),r("li",[t._v("携带一些本域下才会生成的字段")])]),t._v(" "),r("p",[t._v("方法1不用多说，具体记录下方法2的思路。")]),t._v(" "),r("p",[t._v("要防止字段信息保存在cookie中，所以可以保存在session中。在渲染完页面后，利用js脚本在表单提交中新增默认字段，或者在请求中url中携带字段。")]),t._v(" "),r("p",[t._v("对于大型网站，session维护会有成本。可以使用一些通用的分布式token设计，服务端不需要存储session，只需要对token的合法性进行一次计算验证即可。")]),t._v(" "),r("h2",{attrs:{id:"参考"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#参考"}},[t._v("#")]),t._v(" 参考")]),t._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"https://tech.meituan.com/2018/10/11/fe-security-csrf.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("前端安全系列（二）：如何防止CSRF攻击？"),r("OutboundLink")],1)]),t._v(" "),r("li",[r("a",{attrs:{href:"https://xie.infoq.cn/article/1299660678cda463e988251b9",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://xie.infoq.cn/article/1299660678cda463e988251b9"),r("OutboundLink")],1)])])])}),[],!1,null,null,null);e.default=o.exports}}]);