(window.webpackJsonp=window.webpackJsonp||[]).push([[299],{595:function(t,a,r){"use strict";r.r(a);var s=r(12),v=Object(s.a)({},(function(){var t=this,a=t.$createElement,r=t._self._c||a;return r("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[r("h1",{attrs:{id:"sso-signgle-sign-on"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#sso-signgle-sign-on"}},[t._v("#")]),t._v(" SSO: Signgle Sign On")]),t._v(" "),r("h2",{attrs:{id:"场景"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#场景"}},[t._v("#")]),t._v(" 场景")]),t._v(" "),r("p",[t._v("同一公司多个系统，每个系统都需要实现一遍登录校验功能。维护成本、同步成本和开发成本均高。")]),t._v(" "),r("p",[t._v("用户使用系统，也需要多次登录。")]),t._v(" "),r("p",[t._v("SSO（单点登录）就是为了解决多个系统登录授权的问题。它分为"),r("strong",[t._v("单点登录")]),t._v("和"),r("strong",[t._v("单点注销")]),t._v("。")]),t._v(" "),r("h2",{attrs:{id:"介绍"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#介绍"}},[t._v("#")]),t._v(" 介绍")]),t._v(" "),r("p",[t._v("单点登录：用户在子系统a登录后，在子系统b、c均不用重复登录。")]),t._v(" "),r("p",[t._v("单点注销：用户在子系统a注销/过期后，在子系统b、c均注销/过期。")]),t._v(" "),r("h2",{attrs:{id:"架构设计"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#架构设计"}},[t._v("#")]),t._v(" 架构设计")]),t._v(" "),r("p",[t._v("SSO是一个独立的微服务，对外提供登录校验接口。")]),t._v(" "),r("p",[t._v("需要DB来存储会话令牌信息。")]),t._v(" "),r("p",[r("img",{attrs:{src:"https://tva1.sinaimg.cn/large/007S8ZIlgy1giyq4w0b5qj30jn0f4q4h.jpg",alt:""}})]),t._v(" "),r("h2",{attrs:{id:"流程"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#流程"}},[t._v("#")]),t._v(" 流程")]),t._v(" "),r("p",[r("img",{attrs:{src:"https://tva1.sinaimg.cn/large/007S8ZIlgy1giyq5ihdapj30kh0pvq5f.jpg",alt:""}})]),t._v(" "),r("p",[t._v("登录流程如上图所示，注意点：")]),t._v(" "),r("ul",[r("li",[r("p",[t._v("全局令牌用于SSO系统校验，局部令牌用于子系统身份校验（进一步控制资源访问等）")])]),t._v(" "),r("li",[r("p",[t._v("令牌设计可以是JWT，但是SSO需要在DB中存储JWT是否有效的字段（原因见注销流程）")])])]),t._v(" "),r("p",[r("img",{attrs:{src:"https://tva1.sinaimg.cn/large/007S8ZIlgy1giyq8vw9l0j30je0dv3zu.jpg",alt:""}})]),t._v(" "),r("p",[t._v("注销过程如上，注意点：")]),t._v(" "),r("ul",[r("li",[t._v("注销需要在SSO系统中更新令牌的有效标识字段。如果采用JWT，过期时间是写在令牌中，无法在过期前自由控制，所以要在SSO中心额外存储令牌字段来标记识别。")])]),t._v(" "),r("h2",{attrs:{id:"参考链接"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#参考链接"}},[t._v("#")]),t._v(" 参考链接")]),t._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"https://zh.wikipedia.org/zh-hans/%E5%96%AE%E4%B8%80%E7%99%BB%E5%85%A5",target:"_blank",rel:"noopener noreferrer"}},[t._v("wiki: SSO"),r("OutboundLink")],1)]),t._v(" "),r("li",[r("a",{attrs:{href:"https://www.cnblogs.com/ywlaker/p/6113927.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("单点登录原理和实现"),r("OutboundLink")],1)])])])}),[],!1,null,null,null);a.default=v.exports}}]);